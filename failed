<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Commander's Screen</title>
    <link rel="stylesheet" href="https://js.arcgis.com/4.6/esri/css/main.css">
    <link rel="stylesheet" href="./index.css">
    <script src="https://js.arcgis.com/4.6/"></script>
    <script>
        require([
            "esri/Map",
            "esri/views/SceneView",
            "esri/WebScene",
            "esri/layers/GraphicsLayer",
            "esri/Graphic",
            "dojo/dom",
            "dojo/domReady!"
        ], function(
            Map, SceneView, WebScene, GraphicsLayer, Graphic, dom
        ) {
            console.log("yes");
            var titleDiv = dom.byId("titleDiv");

            /************************************************************
             * Creates a new WebScene instance. A WebScene must reference
             * a PortalItem ID that represents a WebScene saved to
             * arcgis.com or an on-premise portal.
             *
             * To load a WebScene from an on-premise portal, set the portal
             * url with esriConfig.portalUrl.
             ************************************************************/
            var scene = new WebScene({
                portalItem: { // autocasts as new PortalItem()
                    id: "96e6fa021c2c4e89b9cb08d2da4ba1cf"
                }
            });

            /************************************************************
             * Set the WebScene instance to the map property in a SceneView.
             ************************************************************/
            var view = new SceneView({
                map: scene,
                container: "viewDiv",
                padding: {
                    top: 40
                }
            });

            view.on("click", function(event) {
                event.stopPropagation();

                // Get the coordinates of the click on the view
                // around the decimals to 3 decimals
                var level = event.mapPoint["z"];
                console.log(event.mapPoint);
                // console.log(level);
                if (level < 2) {
                    view.popup.open({
                        // Set the popup's title to the coordinates of the clicked location
                        title: "Level 1",
                        location: event.mapPoint, // Set the location of the popup to the clicked location
                        content: "Number of Firefighters: 8 \n" + "Number of Victims: 5"
                    });
                } else {
                    view.popup.open({
                        // Set the popup's title to the coordinates of the clicked location
                        title: "Level 2",
                        location: event.mapPoint, // Set the location of the popup to the clicked location
                        content: "Number of Firefighters: 6 \n" + "Number of Victims: 1"
                    });
                }

            });

            view.when(function() {
                // when the scene and view resolve, display the scene's
                // title in the DOM
                var title = scene.portalItem.title;
                titleDiv.innerHTML = title;
            });
        });
    </script>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="./index.js"></script>

</head>

<body>
    <div id="viewDiv">
        <div id="titleDiv"></div>
    </div>
    <div class="progress">
        Progress: <br>
        <progress max="100" value="0"></progress><br>
        <input class="checkbox" type="checkbox">1st Floor</input><br>
        <input class="checkbox" type="checkbox">2nd Floor</input><br>
        <input class="checkbox" type="checkbox">3rd Floor</input>
    </div>
</body>

</html>


$(document).ready(function(){
    console.log("yes");
    $('.checkbox').change(function() {
        console.log("yes");
        if (this.checked) {
            var current_var = $("progress").attr("value")
            $('progress').val(current_var + 33.33);
        } else {
            var current_var = $("progress").attr("value")
            $('progress').val(current_var - 33.33);
        }

        if ($("progress").attr("value") == 99.99) {
            alert("All floors cleared!");
        }
    });
})

html,
body,
#viewDiv {
    padding: 0;
    margin: 0;
    height: 100%;
    width: 100%;
}

#titleDiv {
    background-color: lightgray;
    color: black;
    padding: 5px;
    position: absolute;
    z-index: 2;
    top: 0;
    right: 0;
    font-size: 20pt;
    font-weight: bolder;
    width: 100%;
    height: 30px;
    text-align: center;
    opacity: 0.75;
}

.progress {
    position: fixed;
    right: 50px;
    top: 50px;
    background-color: white;
    border: 1px solid black;
    padding: 10px 30px 10px 10px;
}

progress {
    margin: auto;
    -webkit-appearance: none;
}

::-webkit-progress-bar {
  border: 1px solid black;
  background-color: white;
  color: red;
}

::-webkit-progress-value {
  background-image:
	   -webkit-linear-gradient(-45deg,
	                           transparent 33%, rgba(0, 0, 0, .1) 33%,
	                           rgba(0,0, 0, .1) 66%, transparent 66%),
	   -webkit-linear-gradient(top,
	                           rgba(255, 255, 255, .25),
	                           rgba(0, 0, 0, .25)),
	   -webkit-linear-gradient(left, #09c, #f44);

    border-radius: 2px;
    background-size: 35px 20px, 100% 100%, 100% 100%;
}


input {
    margin: 5px;
}
